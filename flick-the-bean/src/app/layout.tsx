"use client";

import Footer from '@/components/footer/footer';
import Navbar from '@/components/nav/nav';
import { openSignatureRequestPopup } from '@stacks/connect';
import { StacksMainnet } from '@stacks/network';
import type { Metadata } from 'next';
import { useEffect } from 'react';
import './../../styles/main.scss';

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {

  const message = 'Login';
  const getSignature = () => {
    openSignatureRequestPopup({
      message,
      network: new StacksMainnet(),
      appDetails: {
        name: "My App",
        icon: window.location.origin
      },
      onFinish(data) {
        console.log("Signature: ", data.signature);
        console.log("Public Key: ", data.publicKey);
      }
    });
  }

  useEffect(getSignature)
  
  return (
    <html lang="en">
      <body>
      <div className="bg-wrapper">
				<Navbar />
				<main className="main-wrapper">
          {children}
				</main>
				<Footer />
			</div>
      </body>
    </html>
  )
}
